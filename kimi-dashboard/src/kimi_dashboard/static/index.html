<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kimi Executive Security Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0b0f;
            --bg-secondary: #111318;
            --bg-tertiary: #1a1d24;
            --bg-card: #151820;
            --bg-elevated: #1e222c;
            --border-color: #2a2f3a;
            --border-subtle: #1f232b;
            --text-primary: #f0f2f5;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-error: #ef4444;
            --accent-info: #3b82f6;
            --accent-cyan: #06b6d4;
            --accent-pink: #ec4899;
            --glow-success: rgba(16, 185, 129, 0.4);
            --glow-warning: rgba(245, 158, 11, 0.4);
            --glow-error: rgba(239, 68, 68, 0.4);
            --glow-primary: rgba(99, 102, 241, 0.4);
            --glow-cyan: rgba(6, 182, 212, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.5;
        }

        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.02;
            background-image: 
                linear-gradient(rgba(99, 102, 241, 0.5) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.5) 1px, transparent 1px);
            background-size: 60px 60px;
            animation: gridMove 30s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(60px, 60px); }
        }

        .header {
            position: relative;
            z-index: 100;
            padding: 1rem 2rem;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, rgba(17,19,24,0.95) 100%);
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .brand-logo {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.25rem;
            box-shadow: 0 0 30px var(--glow-primary);
        }

        .brand-text {
            display: flex;
            flex-direction: column;
        }

        .brand-title {
            font-size: 1.25rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .brand-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .header-meta {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border-radius: 20px;
            border: 1px solid var(--border-subtle);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-success);
            box-shadow: 0 0 12px var(--glow-success);
            animation: pulse 2s ease-in-out infinite;
        }

        .status-dot.warning {
            background: var(--accent-warning);
            box-shadow: 0 0 12px var(--glow-warning);
        }

        .status-dot.error {
            background: var(--accent-error);
            box-shadow: 0 0 12px var(--glow-error);
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .last-updated {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .exec-summary {
            position: relative;
            z-index: 10;
            margin: 1.5rem 2rem;
            padding: 1.5rem 2rem;
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-tertiary) 100%);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
        }

        .exec-status {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .status-badge {
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.125rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .status-badge.secure {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));
            color: var(--accent-success);
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 0 20px var(--glow-success);
        }

        .status-badge.at-risk {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.05));
            color: var(--accent-warning);
            border: 1px solid rgba(245, 158, 11, 0.3);
            box-shadow: 0 0 20px var(--glow-warning);
        }

        .status-badge.remediating {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05));
            color: var(--accent-error);
            border: 1px solid rgba(239, 68, 68, 0.3);
            box-shadow: 0 0 20px var(--glow-error);
            animation: urgentPulse 1.5s ease-in-out infinite;
        }

        @keyframes urgentPulse {
            0%, 100% { box-shadow: 0 0 20px var(--glow-error); }
            50% { box-shadow: 0 0 40px var(--glow-error), 0 0 60px var(--glow-error); }
        }

        .status-icon {
            font-size: 1.5rem;
        }

        .exec-details {
            display: flex;
            gap: 3rem;
        }

        .exec-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .exec-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
        }

        .exec-value {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        .exec-value.highlight {
            color: var(--accent-warning);
        }

        .container {
            position: relative;
            z-index: 10;
            padding: 0 2rem 2rem;
            max-width: 1920px;
            margin: 0 auto;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--border-subtle);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .card-title-icon {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-primary);
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .card-action {
            padding: 0.375rem 0.75rem;
            font-size: 0.6875rem;
            color: var(--text-muted);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .card-action:hover {
            color: var(--text-primary);
            border-color: var(--accent-primary);
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-3 { grid-column: span 3; }
        .card-4 { grid-column: span 4; }
        .card-6 { grid-column: span 6; }
        .card-8 { grid-column: span 8; }
        .card-12 { grid-column: span 12; }

        @media (max-width: 1400px) {
            .card-3, .card-4 { grid-column: span 6; }
        }

        @media (max-width: 1024px) {
            .card-3, .card-4, .card-6, .card-8 { grid-column: span 12; }
        }

        .risk-score-container {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .risk-gauge {
            position: relative;
            width: 140px;
            height: 140px;
        }

        .risk-gauge svg {
            transform: rotate(-90deg);
        }

        .risk-gauge-bg {
            fill: none;
            stroke: var(--bg-tertiary);
            stroke-width: 12;
        }

        .risk-gauge-fill {
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease, stroke 0.5s ease;
        }

        .risk-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .risk-number {
            font-size: 2.5rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1;
        }

        .risk-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .risk-breakdown {
            flex: 1;
        }

        .risk-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .risk-item:last-child {
            border-bottom: none;
        }

        .risk-item-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .risk-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .risk-indicator.critical { background: var(--accent-error); box-shadow: 0 0 10px var(--glow-error); }
        .risk-indicator.high { background: #f97316; }
        .risk-indicator.medium { background: var(--accent-warning); }
        .risk-indicator.low { background: var(--accent-success); }

        .risk-item-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .compliance-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .compliance-item {
            padding: 1.25rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            text-align: center;
            transition: all 0.3s ease;
        }

        .compliance-item:hover {
            border-color: var(--accent-primary);
        }

        .compliance-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 0.75rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .compliance-item.pci .compliance-icon { background: rgba(6, 182, 212, 0.15); }
        .compliance-item.soc2 .compliance-icon { background: rgba(99, 102, 241, 0.15); }
        .compliance-item.iso .compliance-icon { background: rgba(139, 92, 246, 0.15); }

        .compliance-name {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .compliance-status {
            font-size: 0.8125rem;
            font-weight: 600;
            padding: 0.375rem 0.75rem;
            border-radius: 20px;
            display: inline-block;
        }

        .compliance-status.compliant {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-success);
        }

        .compliance-status.pending {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-warning);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .metric-card {
            padding: 1.25rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
        }

        .metric-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 1.75rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .metric-trend {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.75rem;
        }

        .metric-trend.up { color: var(--accent-success); }
        .metric-trend.down { color: var(--accent-error); }
        .metric-trend.neutral { color: var(--text-muted); }

        .infra-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .infra-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            transition: all 0.3s ease;
        }

        .infra-item:hover {
            border-color: var(--accent-primary);
            background: var(--bg-elevated);
        }

        .infra-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .infra-status.online {
            background: var(--accent-success);
            box-shadow: 0 0 12px var(--glow-success);
        }

        .infra-status.warning {
            background: var(--accent-warning);
            box-shadow: 0 0 12px var(--glow-warning);
        }

        .infra-status.offline {
            background: var(--accent-error);
            box-shadow: 0 0 12px var(--glow-error);
        }

        .infra-info {
            flex: 1;
            min-width: 0;
        }

        .infra-name {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .infra-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .infra-containers {
            display: flex;
            gap: 0.5rem;
        }

        .container-badge {
            padding: 0.25rem 0.5rem;
            font-size: 0.6875rem;
            background: var(--bg-secondary);
            border-radius: 4px;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
        }

        .container-badge.running {
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-success);
        }

        .map-container {
            position: relative;
            height: 300px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            overflow: hidden;
        }

        .world-map {
            width: 100%;
            height: 100%;
        }

        .convergence-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .convergence-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .convergence-percentage {
            font-size: 2.5rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-primary);
        }

        .convergence-stages {
            display: flex;
            gap: 0.5rem;
        }

        .stage-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stage-dot.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            box-shadow: 0 0 15px var(--glow-primary);
            animation: stagePulse 1.5s ease-in-out infinite;
        }

        .stage-dot.completed {
            background: var(--accent-success);
            border-color: var(--accent-success);
        }

        @keyframes stagePulse {
            0%, 100% { box-shadow: 0 0 15px var(--glow-primary); }
            50% { box-shadow: 0 0 25px var(--glow-primary), 0 0 35px var(--glow-primary); }
        }

        .progress-bar-container {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .stage-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.6875rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .chart-container {
            position: relative;
            height: 200px;
        }

        .chart-container.large {
            height: 280px;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent-error);
        }

        .live-dot {
            width: 6px;
            height: 6px;
            background: var(--accent-error);
            border-radius: 50%;
            animation: liveBlink 1s ease-in-out infinite;
        }

        @keyframes liveBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .threat-feed {
            max-height: 300px;
            overflow-y: auto;
        }

        .threat-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.875rem 0;
            border-bottom: 1px solid var(--border-subtle);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .threat-item:last-child {
            border-bottom: none;
        }

        .threat-severity {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .threat-severity.critical { background: var(--accent-error); box-shadow: 0 0 8px var(--glow-error); }
        .threat-severity.high { background: #f97316; }
        .threat-severity.medium { background: var(--accent-warning); }
        .threat-severity.low { background: var(--accent-success); }

        .threat-info {
            flex: 1;
            min-width: 0;
        }

        .threat-type {
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.125rem;
        }

        .threat-source {
            font-size: 0.6875rem;
            color: var(--text-muted);
        }

        .threat-time {
            font-size: 0.6875rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .exec-summary {
                margin: 1rem;
                padding: 1rem;
                flex-direction: column;
                text-align: center;
            }

            .exec-details {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1.5rem;
            }

            .container {
                padding: 0 1rem 1rem;
            }

            .risk-score-container {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>

    <header class="header">
        <div class="brand">
            <div class="brand-logo">K</div>
            <div class="brand-text">
                <div class="brand-title">Kimi Executive Dashboard</div>
                <div class="brand-subtitle">Security Operations Center</div>
            </div>
        </div>
        <div class="header-meta">
            <div class="connection-status">
                <div class="status-dot" id="connectionDot"></div>
                <span id="connectionText">Live Connection</span>
            </div>
            <div class="last-updated" id="lastUpdated">Updated: --:--:-- UTC</div>
        </div>
    </header>

    <div class="exec-summary">
        <div class="exec-status">
            <div class="status-badge secure" id="execStatusBadge">
                <span class="status-icon">&#10003;</span>
                <span id="execStatusText">Secure</span>
            </div>
        </div>
        <div class="exec-details">
            <div class="exec-item">
                <div class="exec-label">Last Incident</div>
                <div class="exec-value" id="lastIncident">14 days ago</div>
            </div>
            <div class="exec-item">
                <div class="exec-label">Next Audit</div>
                <div class="exec-value" id="nextAudit">2026-03-15</div>
            </div>
            <div class="exec-item">
                <div class="exec-label">Actions Required</div>
                <div class="exec-value highlight" id="actionsRequired">2 Pending</div>
            </div>
            <div class="exec-item">
                <div class="exec-label">Active Sessions</div>
                <div class="exec-value" id="activeSessions">3</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-grid">
            
            <div class="card card-4">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon"></div>
                        Security Posture
                    </div>
                    <div class="card-actions">
                        <span class="card-action">24h</span>
                        <span class="card-action">7d</span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="risk-score-container">
                        <div class="risk-gauge">
                            <svg width="140" height="140" viewBox="0 0 140 140">
                                <circle class="risk-gauge-bg" cx="70" cy="70" r="58"/>
                                <circle id="riskGaugeFill" class="risk-gauge-fill" cx="70" cy="70" r="58"
                                    stroke-dasharray="364.4" stroke-dashoffset="91.1" stroke="#10b981"/>
                            </svg>
                            <div class="risk-value">
                                <div class="risk-number" id="riskScore" style="color: var(--accent-success);">75</div>
                                <div class="risk-label">Risk Score</div>
                            </div>
                        </div>
                        <div class="risk-breakdown">
                            <div class="risk-item">
                                <div class="risk-item-label">
                                    <div class="risk-indicator critical"></div>
                                    Critical
                                </div>
                                <div class="risk-item-value" id="criticalCount">0</div>
                            </div>
                            <div class="risk-item">
                                <div class="risk-item-label">
                                    <div class="risk-indicator high"></div>
                                    High
                                </div>
                                <div class="risk-item-value" id="highCount">2</div>
                            </div>
                            <div class="risk-item">
                                <div class="risk-item-label">
                                    <div class="risk-indicator medium"></div>
                                    Medium
                                </div>
                                <div class="risk-item-value" id="mediumCount">5</div>
                            </div>
                            <div class="risk-item">
                                <div class="risk-item-label">
                                    <div class="risk-indicator low"></div>
                                    Low
                                </div>
                                <div class="risk-item-value" id="lowCount">12</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card card-4">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-cyan);"></div>
                        Compliance Status
                    </div>
                </div>
                <div class="card-content">
                    <div class="compliance-grid">
                        <div class="compliance-item pci">
                            <div class="compliance-icon">&#128274;</div>
                            <div class="compliance-name">PCI DSS</div>
                            <div class="compliance-status compliant">Compliant</div>
                        </div>
                        <div class="compliance-item soc2">
                            <div class="compliance-icon">&#128203;</div>
                            <div class="compliance-name">SOC 2</div>
                            <div class="compliance-status compliant">Compliant</div>
                        </div>
                        <div class="compliance-item iso">
                            <div class="compliance-icon">&#128737;</div>
                            <div class="compliance-name">ISO 27001</div>
                            <div class="compliance-status pending">In Progress</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card card-4">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-pink);"></div>
                        Convergence Metrics
                    </div>
                </div>
                <div class="card-content">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-label">Iterations to Convergence</div>
                            <div class="metric-value" id="iterationsCount">12</div>
                            <div class="metric-trend up">
                                <span>&#8595;</span> 15% vs last week
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Mean Time to Remediate</div>
                            <div class="metric-value" id="mttrValue">4.2h</div>
                            <div class="metric-trend up">
                                <span>&#8595;</span> 23% improvement
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Auto-Fix Success Rate</div>
                            <div class="metric-value" id="autofixRate">94%</div>
                            <div class="metric-trend up">
                                <span>&#8593;</span> 3% vs last month
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Cost Savings (YTD)</div>
                            <div class="metric-value" id="costSavings">$127K</div>
                            <div class="metric-trend up">
                                <span>&#8593;</span> 18% over budget
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card card-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-info);"></div>
                        Infrastructure Overview
                    </div>
                    <div class="live-indicator">
                        <div class="live-dot"></div>
                        Live
                    </div>
                </div>
                <div class="card-content">
                    <div class="infra-list" id="infraList"></div>
                </div>
            </div>

            <div class="card card-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-secondary);"></div>
                        Convergence Progress
                    </div>
                </div>
                <div class="card-content">
                    <div class="convergence-container">
                        <div class="convergence-header">
                            <div class="convergence-percentage" id="convergencePercent">87%</div>
                            <div class="convergence-stages" id="convergenceStages">
                                <div class="stage-dot completed"></div>
                                <div class="stage-dot completed"></div>
                                <div class="stage-dot completed"></div>
                                <div class="stage-dot active"></div>
                                <div class="stage-dot"></div>
                                <div class="stage-dot"></div>
                            </div>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" id="convergenceProgress" style="width: 87%"></div>
                        </div>
                        <div class="stage-labels">
                            <span>Idle</span>
                            <span>Diagnose</span>
                            <span>Fix</span>
                            <span style="color: var(--accent-primary);">Attack</span>
                            <span>Validate</span>
                            <span>Converged</span>
                        </div>
                    </div>
                    <div class="chart-container" style="margin-top: 1.5rem;">
                        <canvas id="convergenceChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="card card-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-error);"></div>
                        Global Threat Map
                    </div>
                    <div class="live-indicator">
                        <div class="live-dot"></div>
                        Real-time
                    </div>
                </div>
                <div class="card-content">
                    <div class="map-container" id="threatMap">
                        <svg class="world-map" viewBox="0 0 1000 500" preserveAspectRatio="xMidYMid slice">
                            <defs>
                                <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(99,102,241,0.1)" stroke-width="0.5"/>
                                </pattern>
                                <radialGradient id="glow" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" stop-color="rgba(99,102,241,0.3)"/>
                                    <stop offset="100%" stop-color="transparent"/>
                                </radialGradient>
                            </defs>
                            <rect width="100%" height="100%" fill="url(#grid)"/>
                            
                            <g fill="rgba(99,102,241,0.08)" stroke="rgba(99,102,241,0.2)" stroke-width="0.5">
                                <path d="M 150,120 L 280,100 L 320,150 L 280,220 L 200,200 Z"/>
                                <path d="M 260,280 L 320,270 L 340,350 L 300,420 L 270,380 Z"/>
                                <path d="M 480,110 L 550,100 L 580,140 L 540,170 L 490,160 Z"/>
                                <path d="M 490,200 L 580,190 L 600,280 L 550,350 L 500,300 Z"/>
                                <path d="M 600,100 L 850,90 L 900,180 L 800,250 L 650,220 Z"/>
                                <path d="M 800,320 L 900,310 L 920,380 L 850,400 Z"/>
                            </g>
                            
                            <circle cx="250" cy="150" r="6" fill="var(--accent-success)" opacity="0.8">
                                <animate attributeName="r" values="6;10;6" dur="2s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.8;0.3;0.8" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            
                            <g id="attackPoints">
                                <circle cx="520" cy="130" r="4" fill="var(--accent-error)" opacity="0.9">
                                    <animate attributeName="r" values="4;8;4" dur="1.5s" repeatCount="indefinite"/>
                                </circle>
                                <circle cx="700" cy="180" r="4" fill="var(--accent-error)" opacity="0.9">
                                    <animate attributeName="r" values="4;8;4" dur="1.8s" repeatCount="indefinite"/>
                                </circle>
                                <circle cx="550" cy="250" r="4" fill="var(--accent-warning)" opacity="0.9">
                                    <animate attributeName="r" values="4;7;4" dur="2s" repeatCount="indefinite"/>
                                </circle>
                                <circle cx="850" cy="350" r="4" fill="var(--accent-error)" opacity="0.9">
                                    <animate attributeName="r" values="4;8;4" dur="1.6s" repeatCount="indefinite"/>
                                </circle>
                                <circle cx="150" cy="350" r="4" fill="var(--accent-warning)" opacity="0.9">
                                    <animate attributeName="r" values="4;7;4" dur="2.2s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            
                            <g id="attackLines" stroke="var(--accent-error)" stroke-width="1" opacity="0.6" fill="none">
                                <path d="M 520,130 Q 400,140 250,150">
                                    <animate attributeName="stroke-dasharray" values="0,500;500,0" dur="2s" repeatCount="indefinite"/>
                                </path>
                                <path d="M 700,180 Q 480,165 250,150">
                                    <animate attributeName="stroke-dasharray" values="0,600;600,0" dur="2.5s" repeatCount="indefinite"/>
                                </path>
                                <path d="M 550,250 Q 400,200 250,150">
                                    <animate attributeName="stroke-dasharray" values="0,450;450,0" dur="3s" repeatCount="indefinite"/>
                                </path>
                                <path d="M 850,350 Q 550,250 250,150">
                                    <animate attributeName="stroke-dasharray" values="0,800;800,0" dur="2.8s" repeatCount="indefinite"/>
                                </path>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="card card-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-warning);"></div>
                        Live Threat Feed
                    </div>
                    <div class="live-indicator">
                        <div class="live-dot"></div>
                        Live
                    </div>
                </div>
                <div class="card-content">
                    <div class="threat-feed" id="threatFeed"></div>
                </div>
            </div>

            <div class="card card-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-success);"></div>
                        Risk Trend (30 Days)
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container large">
                        <canvas id="riskTrendChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="card card-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon" style="background: var(--accent-cyan);"></div>
                        Infrastructure Health
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container large">
                        <canvas id="infraHealthChart"></canvas>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const infrastructureData = [
            {
                name: 'kimi-api-1',
                ip: '167.99.42.105',
                region: 'nyc1',
                status: 'online',
                containers: [
                    { name: 'api-gateway', status: 'running' },
                    { name: 'auth-service', status: 'running' },
                    { name: 'rate-limiter', status: 'running' }
                ],
                cpu: 42,
                memory: 68
            },
            {
                name: 'kimi-api-2',
                ip: '167.99.43.212',
                region: 'nyc1',
                status: 'online',
                containers: [
                    { name: 'api-gateway', status: 'running' },
                    { name: 'worker-1', status: 'running' },
                    { name: 'worker-2', status: 'running' }
                ],
                cpu: 38,
                memory: 61
            },
            {
                name: 'kimi-db',
                ip: '167.99.44.88',
                region: 'nyc1',
                status: 'online',
                containers: [
                    { name: 'postgres-primary', status: 'running' },
                    { name: 'postgres-replica', status: 'running' },
                    { name: 'pgbouncer', status: 'running' }
                ],
                cpu: 55,
                memory: 72
            },
            {
                name: 'kimi-cache',
                ip: '167.99.45.156',
                region: 'nyc1',
                status: 'warning',
                containers: [
                    { name: 'redis-master', status: 'running' },
                    { name: 'redis-slave', status: 'running' },
                    { name: 'sentinel-1', status: 'running' }
                ],
                cpu: 78,
                memory: 85
            },
            {
                name: 'kimi-lb',
                ip: '167.99.46.33',
                region: 'nyc1',
                status: 'online',
                containers: [
                    { name: 'nginx', status: 'running' },
                    { name: 'cert-manager', status: 'running' }
                ],
                cpu: 25,
                memory: 42
            }
        ];

        const threatTypes = [
            { type: 'SQL Injection Attempt', severity: 'high', sources: ['CN', 'RU', 'BR'] },
            { type: 'DDoS Attack', severity: 'critical', sources: ['Unknown', 'Botnet'] },
            { type: 'Brute Force Login', severity: 'medium', sources: ['VN', 'IN', 'ID'] },
            { type: 'XSS Attempt', severity: 'medium', sources: ['US', 'DE', 'FR'] },
            { type: 'Path Traversal', severity: 'high', sources: ['NL', 'RO'] },
            { type: 'Credential Stuffing', severity: 'medium', sources: ['Global'] },
            { type: 'API Abuse', severity: 'low', sources: ['US', 'CA'] }
        ];

        let threatFeed = [];
        let ws = null;
        let charts = {};

        document.addEventListener('DOMContentLoaded', () => {
            initInfrastructure();
            initThreatFeed();
            initCharts();
            updateTime();
            connectWebSocket();
            setInterval(updateTime, 1000);
            setInterval(simulateUpdates, 3000);
        });

        function updateTime() {
            const now = new Date();
            document.getElementById('lastUpdated').textContent = 
                `Updated: ${now.toISOString().replace('T', ' ').slice(0, 19)} UTC`;
        }

        function initInfrastructure() {
            const container = document.getElementById('infraList');
            container.innerHTML = infrastructureData.map(server => `
                <div class="infra-item">
                    <div class="infra-status ${server.status}"></div>
                    <div class="infra-info">
                        <div class="infra-name">${server.name}</div>
                        <div class="infra-meta">${server.ip} &bull; ${server.region} &bull; CPU: ${server.cpu}% &bull; MEM: ${server.memory}%</div>
                    </div>
                    <div class="infra-containers">
                        ${server.containers.map(c => `
                            <span class="container-badge ${c.status}">${c.name}</span>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function initThreatFeed() {
            for (let i = 0; i < 8; i++) {
                addThreat();
            }
            renderThreatFeed();
        }

        function addThreat() {
            const threat = threatTypes[Math.floor(Math.random() * threatTypes.length)];
            const source = threat.sources[Math.floor(Math.random() * threat.sources.length)];
            const now = new Date();
            
            threatFeed.unshift({
                type: threat.type,
                severity: threat.severity,
                source: source,
                time: now
            });
            
            if (threatFeed.length > 20) {
                threatFeed = threatFeed.slice(0, 20);
            }
        }

        function renderThreatFeed() {
            const container = document.getElementById('threatFeed');
            container.innerHTML = threatFeed.map((threat, index) => {
                const timeAgo = getTimeAgo(threat.time);
                return `
                    <div class="threat-item" style="animation-delay: ${index * 0.05}s">
                        <div class="threat-severity ${threat.severity}"></div>
                        <div class="threat-info">
                            <div class="threat-type">${threat.type}</div>
                            <div class="threat-source">Source: ${threat.source}</div>
                        </div>
                        <div class="threat-time">${timeAgo}</div>
                    </div>
                `;
            }).join('');
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return `${seconds}s ago`;
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            return `${Math.floor(minutes / 60)}h ago`;
        }

        function initCharts() {
            const riskCtx = document.getElementById('riskTrendChart').getContext('2d');
            const riskGradient = riskCtx.createLinearGradient(0, 0, 0, 280);
            riskGradient.addColorStop(0, 'rgba(99, 102, 241, 0.3)');
            riskGradient.addColorStop(1, 'rgba(99, 102, 241, 0)');
            
            charts.riskTrend = new Chart(riskCtx, {
                type: 'line',
                data: {
                    labels: generateDateLabels(30),
                    datasets: [{
                        label: 'Risk Score',
                        data: generateTrendData(30, 60, 85),
                        borderColor: '#6366f1',
                        backgroundColor: riskGradient,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6
                    }, {
                        label: 'Industry Avg',
                        data: generateTrendData(30, 50, 70),
                        borderColor: '#6b7280',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            align: 'end',
                            labels: {
                                color: '#9ca3af',
                                font: { size: 11 },
                                usePointStyle: true,
                                boxWidth: 8
                            }
                        },
                        tooltip: {
                            backgroundColor: '#1a1d24',
                            titleColor: '#f0f2f5',
                            bodyColor: '#9ca3af',
                            borderColor: '#2a2f3a',
                            borderWidth: 1,
                            padding: 12
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(42, 47, 58, 0.5)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#6b7280',
                                font: { size: 10 },
                                maxTicksLimit: 6
                            }
                        },
                        y: {
                            min: 0,
                            max: 100,
                            grid: {
                                color: 'rgba(42, 47, 58, 0.5)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#6b7280',
                                font: { size: 10 }
                            }
                        }
                    }
                }
            });

            const infraCtx = document.getElementById('infraHealthChart').getContext('2d');
            charts.infraHealth = new Chart(infraCtx, {
                type: 'bar',
                data: {
                    labels: ['kimi-api-1', 'kimi-api-2', 'kimi-db', 'kimi-cache', 'kimi-lb'],
                    datasets: [{
                        label: 'CPU %',
                        data: [42, 38, 55, 78, 25],
                        backgroundColor: '#6366f1',
                        borderRadius: 4
                    }, {
                        label: 'Memory %',
                        data: [68, 61, 72, 85, 42],
                        backgroundColor: '#06b6d4',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            align: 'end',
                            labels: {
                                color: '#9ca3af',
                                font: { size: 11 },
                                usePointStyle: true,
                                boxWidth: 8
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#9ca3af',
                                font: { size: 10 }
                            }
                        },
                        y: {
                            max: 100,
                            grid: {
                                color: 'rgba(42, 47, 58, 0.5)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#6b7280',
                                font: { size: 10 }
                            }
                        }
                    }
                }
            });

            const convCtx = document.getElementById('convergenceChart').getContext('2d');
            charts.convergence = new Chart(convCtx, {
                type: 'line',
                data: {
                    labels: ['1h', '50m', '40m', '30m', '20m', '10m', 'Now'],
                    datasets: [{
                        label: 'Convergence %',
                        data: [12, 28, 45, 62, 74, 82, 87],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#8b5cf6',
                        pointBorderColor: '#0a0b0f',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(42, 47, 58, 0.3)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#6b7280',
                                font: { size: 10 }
                            }
                        },
                        y: {
                            min: 0,
                            max: 100,
                            grid: {
                                color: 'rgba(42, 47, 58, 0.3)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#6b7280',
                                font: { size: 10 }
                            }
                        }
                    }
                }
            });
        }

        function generateDateLabels(days) {
            const labels = [];
            const now = new Date();
            for (let i = days - 1; i >= 0; i--) {
                const d = new Date(now - i * 24 * 60 * 60 * 1000);
                labels.push(`${d.getMonth() + 1}/${d.getDate()}`);
            }
            return labels;
        }

        function generateTrendData(count, min, max) {
            const data = [];
            let value = (min + max) / 2;
            for (let i = 0; i < count; i++) {
                value += (Math.random() - 0.5) * 10;
                value = Math.max(min, Math.min(max, value));
                data.push(Math.round(value));
            }
            return data;
        }

        function simulateUpdates() {
            if (Math.random() > 0.3) {
                addThreat();
                renderThreatFeed();
            }
            
            const currentProgress = parseInt(document.getElementById('convergencePercent').textContent);
            if (currentProgress < 100 && Math.random() > 0.5) {
                const newProgress = Math.min(100, currentProgress + Math.floor(Math.random() * 3));
                document.getElementById('convergencePercent').textContent = newProgress + '%';
                document.getElementById('convergenceProgress').style.width = newProgress + '%';
                
                const stages = document.querySelectorAll('.stage-dot');
                const activeStage = Math.floor(newProgress / 17);
                stages.forEach((stage, index) => {
                    stage.classList.remove('active', 'completed');
                    if (index < activeStage) {
                        stage.classList.add('completed');
                    } else if (index === activeStage) {
                        stage.classList.add('active');
                    }
                });
            }
            
            infrastructureData.forEach(server => {
                server.cpu = Math.max(10, Math.min(95, server.cpu + (Math.random() - 0.5) * 10));
                server.memory = Math.max(20, Math.min(95, server.memory + (Math.random() - 0.5) * 5));
            });
            initInfrastructure();
            
            if (charts.infraHealth) {
                charts.infraHealth.data.datasets[0].data = infrastructureData.map(s => Math.round(s.cpu));
                charts.infraHealth.data.datasets[1].data = infrastructureData.map(s => Math.round(s.memory));
                charts.infraHealth.update('none');
            }
        }

        function connectWebSocket() {
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsUrl = `${protocol}//${window.location.host}/ws`;
            
            ws = new WebSocket(wsUrl);
            
            ws.onopen = () => {
                document.getElementById('connectionDot').classList.remove('error');
                document.getElementById('connectionText').textContent = 'Live Connection';
            };
            
            ws.onclose = () => {
                document.getElementById('connectionDot').classList.add('error');
                document.getElementById('connectionText').textContent = 'Reconnecting...';
                setTimeout(connectWebSocket, 5000);
            };
            
            ws.onmessage = (event) => {
                const message = JSON.parse(event.data);
                handleWebSocketMessage(message);
            };
        }

        function handleWebSocketMessage(message) {
            if (message.type === 'event') {
                const data = message.data;
                
                if (data.event_type === 'CONVERGENCE_REACHED') {
                    document.getElementById('execStatusBadge').className = 'status-badge secure';
                    document.getElementById('execStatusText').textContent = 'Secure';
                } else if (data.event_type === 'VULNERABILITY_FOUND') {
                    const critical = parseInt(document.getElementById('criticalCount').textContent);
                    document.getElementById('criticalCount').textContent = critical + 1;
                    updateRiskScore();
                }
            }
        }

        function updateRiskScore() {
            const critical = parseInt(document.getElementById('criticalCount').textContent);
            const high = parseInt(document.getElementById('highCount').textContent);
            const medium = parseInt(document.getElementById('mediumCount').textContent);
            
            const deductions = (critical * 15) + (high * 8) + (medium * 3);
            const score = Math.max(0, 100 - deductions);
            
            const scoreEl = document.getElementById('riskScore');
            scoreEl.textContent = score;
            
            const gaugeFill = document.getElementById('riskGaugeFill');
            if (score >= 80) {
                scoreEl.style.color = 'var(--accent-success)';
                gaugeFill.setAttribute('stroke', '#10b981');
            } else if (score >= 60) {
                scoreEl.style.color = 'var(--accent-warning)';
                gaugeFill.setAttribute('stroke', '#f59e0b');
            } else {
                scoreEl.style.color = 'var(--accent-error)';
                gaugeFill.setAttribute('stroke', '#ef4444');
            }
            
            const circumference = 364.4;
            const offset = circumference - (score / 100) * circumference;
            gaugeFill.style.strokeDashoffset = offset;
        }
    </script>
</body>
</html>